/* File generated with Shader Minifier 1.1.5
 * http://www.ctrl-alt-test.fr
 */
#ifndef SFX_H_
# define SFX_H_

const char *sfx_frag =
 "#version 130\n"
 "uniform float iBlockOffset,iSampleRate,iVolume;"
 "uniform int iTexS;"
 "uniform samper2D iSequence;"
 "uniform float iSequenceWidth;"
 "float t(float f)"
 "{"
   "float i=mod(f,2.);"
   "f*=.5;"
   "vec2 r=(vec2(mod(f,iFontWidth),floor(f/iFontWidth))+.05)/iFontWidth;"
   "vec4 s=texture(iFont,r);"
   "vec2 N=mix(s.xy,s.zw,i);"
   "return round(dot(vec2(255.,65280.),N));"
 "}"
 "float f(float i)"
 "{"
   "float f=t(i),I=floor(f/32768.),m=floor(f/1024.-I*32.),N=f-I*32768.-m*1024.;"
   "if(m==0.)"
     "return mix(1.,-1.,I)*5.96046e-08*N;"
   "return mix(1.,-1.,I)*(1.+N*.000976563)*pow(2.,m-15.);"
 "}\n"
 "#define NTRK rfloat(0.)\n"
 "#define NMOD trk_sep(NTRK)\n"
 "#define NPTN rfloat(4.*NTRK+4.*NMOD+2.)\n"
 "#define NNOT ptn_sep(NPTN)\n"
 "int i(int i)"
 "{"
   "return int(f(1+float(i)));"
 "}"
 "int p(int i)"
 "{"
   "return int(f(NTRK+2.+float(i)));"
 "}"
 "float r(int i)"
 "{"
   "return f(2.*NTRK+2.+float(i));"
 "}"
 "float w(int i)"
 "{"
   "return f(3.*NTRK+2.+float(i));"
 "}"
 "float n(int i)"
 "{"
   "return f(4.*NTRK+2.+float(i));"
 "}"
 "float d(int i)"
 "{"
   "return f(4.*NTRK+NMOD+2.+float(i));"
 "}"
 "int s(int i)"
 "{"
   "return int(f(4.*NTRK+2.*NMOD+2.+float(i)));"
 "}"
 "float N(int i)"
 "{"
   "return f(4.*NTRK+3.*NMOD+2.+float(i));"
 "}"
 "int m(int i)"
 "{"
   "return int(f(4.*NTRK+4.*NMOD+3.+float(i)));"
 "}"
 "float x(int i)"
 "{"
   "return f(4.*NTRK+4.*NMOD+NPTN+4.+float(i));"
 "}"
 "float a(int i)"
 "{"
   "return f(4.*NTRK+4.*NMOD+NPTN+NNOT+4.+float(i));"
 "}"
 "float c(int i)"
 "{"
   "return f(4.*NTRK+4.*NMOD+NPTN+2.*NNOT+4.+float(i));"
 "}"
 "float e(int i)"
 "{"
   "return f(4.*NTRK+4.*NMOD+NPTN+3.*NNOT+4.+float(i));"
 "}\n"
 "#define PI radians(180.)\n"
 "float P(float i)"
 "{"
   "return clamp(i,-1.,1.);"
 "}"
 "float v(float f)"
 "{"
   "return smoothstep(0.,.01,f);"
 "}"
 "float o(float i)"
 "{"
   "return sin(2.*PI*mod(i,1.));"
 "}"
 "float N(float i,float f)"
 "{"
   "return sin(2.*PI*mod(i,1.)+f);"
 "}"
 "float P(float i,float f)"
 "{"
   "return.5*N(i)+.5*N((1.+f)*i);"
 "}"
 "float l(float i)"
 "{"
   "return sign(2.*fract(i)-1.);"
 "}"
 "float a(float i,float f)"
 "{"
   "return sign(2.*fract(i)-1.+f);"
 "}"
 "float u(float i)"
 "{"
   "return P(50.*N(i));"
 "}"
 "float c(float i,float f)"
 "{"
   "return P(50.*(N(i)-f));"
 "}"
 "float T(float i)"
 "{"
   "return 4.*abs(fract(i)-.5)-1.;"
 "}"
 "float R(float i)"
 "{"
   "return 2.*fract(i)-1.;"
 "}"
 "float N(float i,float f,float N)"
 "{"
   "return floor(f*i+.5)*N;"
 "}"
 "float R(float i,float f)"
 "{"
   "return floor(f*i+.5)/f;"
 "}"
 "float h(float f)"
 "{"
   "return 32.7*pow(2.,f/12.);"
 "}"
 "float g(int i)"
 "{"
   "return 1.-2.*float(i%2);"
 "}"
 "float O(int i)"
 "{"
   "return round(sin(.5*PI*float(i)));"
 "}\n"
 "#define pat4(a,b,c,d,x)mod(x,1.)<.25?a:mod(x,1.)<.5?b:mod(x,1.)<.75?c:d\n"
 "const float y=15.,I=y/60.,b=60./y,K=44100.,S=2.26757e-05;"
 "float N(float f,float i,float s,float N)"
 "{"
   "return smoothstep(-1e-05,i,f)-(1.-N)*smoothstep(0.,s,f-i);"
 "}"
 "float O(float i,float f,float N,float s)"
 "{"
   "return i<f?i/f:i<f+N?1.:i<f+N+s?1.+(1.-i)*(f+N)/s:0.;"
 "}"
 "float N(float i,float f,float N,float s,float r,float m)"
 "{"
   "float c=i/N,I=1.-(1.-r)*(i-N)/s,b=i<=f-m?1.:(f-i)/m;"
   "return i<N?c:i<N+s?I:i<=f-m?r:i<=f?(f-i)/m:0.;"
 "}"
 "float O(float i,float f,float N,float s,float m,float r)"
 "{"
   "float c=pow(i/N,8.),I=m+(1.-m)*exp(-(i-N)/s),e=i<=f-r?1.:pow((f-i)/r,4.);"
   "return(i<N?c:I)*e;"
 "}"
 "float D(float i)"
 "{"
   "return 2./PI*atan(i);"
 "}"
 "float M(float i)"
 "{"
   "return clamp(D(i)-.1*cos(.9*i*exp(i)),-1.,1.);"
 "}"
 "float D(float i,float f)"
 "{"
   "return abs(i)<f?i:floor(4.*i+.5)*.25;"
 "}"
 "float D(float i,float f,float N,float s,float m,float r,float c)"
 "{"
   "float e,I=sign(i);"
   "i=abs(i);"
   "if(i<N)"
     "e=s*smoothstep(0.,N,i);"
   "else"
     " if(i<m)"
       "e=m+(s-m)*smoothstep(m,N,i);"
     "else"
       " if(i<=r)"
         "e=i;"
       "else"
         " if(i<=1.)"
           "{"
             "float P=(i-r)/(1.-r);"
             "e=r+(c-r)*(1.5*P*(1.-.33*P*P));"
           "}"
         "else"
           " return 1.;"
   "return I*mix(i,e,f);"
 "}"
 "float D(float f,float i,float N,float s,float r,float I,float m,float c,float P)"
 "{"
   "return f=f-i,f<0.?0.:N+s*f+r*f*f+I*sin(m*f)+c*exp(-P*f);"
 "}"
 "float M(int i,float t)"
 "{"
   "return t*g(i);"
 "}"
 "float O(int i,float f)"
 "{"
   "return i%2==0?0.:f*f*O(i);"
 "}"
 "float D(int i,float f,float s)"
 "{"
   "return i%2==0?0.:f*(1.-O(i))*N(s);"
 "}"
 "float M(int i,float f,float s)"
 "{"
   "return i%2==0?0.:f*(g(i)*N(s*float(i)+.25)-1.);"
 "}"
 "float D(float i,float f,float s,int m,int r,float I,float c,float x,float P,float K,float t,float e,int p)"
 "{"
   "float v=0.,b=p==1?1./c:f/c,S=p==1?1./K:1./(K*f),T=f*i+s;"
   "for(int a=1;a<=m;a+=r)"
     "{"
       "float y=float(a),d=1./y,h=I<0.?(I+1.)*O(a,d)+-I*M(a,d):I<1.?I*O(a,d)+(1.-I)*D(a,d,e):(I-1.)*M(a,d,e)+(2.-I)*D(a,d,e),g=pow(1.+pow(y*b,x),-.5)+P*exp(-pow((y*f-c)*S,2.));"
       "if(abs(g*h)<1e-06)"
         "break;"
       "v+=h*g*(N(y*T)+N(y*T*(1.+t)));"
     "}"
   "return D(v);"
 "}"
 "float D(float i,float f,int s,float m,float I,float r,float c,float P)"
 "{"
   "float e=0.;"
   "int p=1;"
   "for(int a=0;a<=s;a+=p)"
     "{"
       "float y=2.*float(a)+1.,b=1./y,K=(a%2==1?-1.:1.)*b*b,S=b,T=pow(1.+pow(float(a)*I,2.*r),-.5)+c*exp(-pow(float(a)*I*P,2.));"
       "e+=(m*K+(1.-m)*S)*T*N(y*f*i);"
     "}"
   "return e;"
 "}"
 "float D(float i,float f,float s,float m,float N)"
 "{"
   "int a=128;"
   "m=sqrt(m*S);"
   "float r=pow(.5,(128.-m*128.)/16.),e=pow(.5,(N*128.+24.)/16.),b=0.,P=0.;"
   "for(int c=0;c<a;c++)"
     "{"
       "float p=i-float(a-c)/K,d=p*I,T=2.*fract(f*p)-1.;"
       "b=(1.-e*r)*b-r*P+r*T;"
       "P=(1.-e*r)*P+r*b;"
     "}"
   "return P;"
 "}"
 "float O(float f,float i,float r)"
 "{"
   "f=f-min(f,i);"
   "float s=60.+150.*smoothstep(-.3,0.,-f),I=smoothstep(0.,.01,f)*smoothstep(-.1,.2,.3-f),e=I*.1*D(f,s,100,1.,1.,.1,16.,10.);"
   "e+=.7*(smoothstep(0.,.01,f)*smoothstep(-.2,.2,.3-f))*N(f*s*.5);"
   "float c=1.5*step(f,.05)*N(f*5000.*R(f*1000.));"
   "c=D(40.*(1.-exp(-1000.*f))*exp(-80.*f)*N((1200.-1000.*sin(1000.*f*sin(30.*f)))*f));"
   "float K=M(10.*(1.-exp(-1000.*f))*exp(-30.*f)*N((300.-300.*f)*f));"
   "return r*2.*clamp(e+K+c,-1.5,1.5);"
 "}"
 "float M(float i,float f,float s,float m,float r)"
 "{"
   "int a=128;"
   "m=sqrt(m*S);"
   "float P=pow(.5,(128.-m*128.)/16.),e=pow(.5,(r*128.+24.)/16.),b=0.,c=0.;"
   "for(int p=0;p<a;p++)"
     "{"
       "float y=i-float(a-p)/K,T=y*I,d=D(2.*fract((f+.3*N(5.*T)*N(y,s,.2,.3,.8,.2))*y)-1.+(2.*fract(.99*(f+.3*N(5.*T)*N(y,s,.2,.3,.8,.2))*y)-1.)+(2.*fract(.989*(f+.3*N(5.*T)*N(y,s,.2,.3,.8,.2))*y)-1.)+(2.*fract(1.02*(f+.3*N(5.*T)*N(y,s,.2,.3,.8,.2))*y)-1.));"
       "b=(1.-e*P)*b-P*c+P*d;"
       "c=(1.-e*P)*c+P*b;"
     "}"
   "return c;"
 "}"
 "float N(float i,float f,float s,float m,float r)"
 "{"
   "int N=128;"
   "m=sqrt(m*S);"
   "float P=pow(.5,(128.-m*128.)/16.),e=pow(.5,(r*128.+24.)/16.),b=0.,c=0.;"
   "for(int p=0;p<N;p++)"
     "{"
       "float y=i-float(N-p)/K,d=y*I,k=D(D(a(.25*f*y,.2*(2.*fract(2.*f*y+.4*T(.5*f*y))-1.))+a(.249*f*y,.2*(2.*fract(2.*f*y+.4*T(.5*f*y))-1.)))+.8*(2.*fract(2.*f*y+.4*T(.5*f*y))-1.),2.*fract(2.*f*y+.4*T(.5*f*y))-1.,.1,.3,.3,.8,.8);"
       "b=(1.-e*P)*b-P*c+P*k;"
       "c=(1.-e*P)*c+P*b;"
     "}"
   "return c;"
 "}"
 "float O(float i,float f,float s,float m,float r)"
 "{"
   "int c=128;"
   "m=sqrt(m*S);"
   "float e=pow(.5,(128.-m*128.)/16.),b=pow(.5,(r*128.+24.)/16.),T=0.,y=0.;"
   "for(int p=0;p<c;p++)"
     "{"
       "float d=i-float(c-p)/K,h=d*I,k=.7*P(2.5*fract(16.*h))*(2.*fract(.99*f*d)-1.)+.7*P(2.5*fract(16.*h))*a(.5*f*d,.2)+.7*P(2.5*fract(16.*h))*N(.48*f*d,.25)+-.35;"
       "T=(1.-b*e)*T-e*y+e*k;"
       "y=(1.-b*e)*y+e*T;"
     "}"
   "return y;"
 "}"
 "float M(float i,float f,int s,float y,float r,float m,float P,float e,float I)"
 "{"
   "float c=0.,T=mod(f,2.),b=60.*y,d=m*2.*PI/15.*f/sqrt(10.*P-.5*e*f);"
   "int p=10+s;"
   "for(int a=0;a<2*p+1;a++)"
     "{"
       "float K=i+float(a-p)*d;"
       "c+=N(b*K+.5*(1.+r*T)*N(.5*b*K));"
     "}"
   "float a=exp(-2.*I*f);"
   "return atan(c*a);"
 "}"
 "float D(float i,float f,float r,float s,float m,int a)"
 "{"
   "float y=f-r,e=y/(s-r),d=s-r,I=b*d,K=b*(f-r),p=h(m),S=1.,x=v(f-r)*v(s-f),g=N(i*p);"
   "if(a==0)"
     ";"
   "else"
     " if(a==2)"
       "g=v(y)*exp(-16.*mod(y,.125))*v(y)*exp(-1.5*y)*(D(2.*fract(p*i)-1.+(2.*fract(.99*p*i)-1.)+(2.*fract(.967*p*i)-1.)+(2.*fract(.96*p*i)-1.))+.6*D(2.*fract(.5*p*i+.01)-1.+(2.*fract(.475*p*i+.01)-1.)+(2.*fract(.515*p*i+.01)-1.)+(2.*fract(.51*p*i+.01)-1.)));"
     "else"
       " if(a==5)"
         "g=N(K,I,.2,.3,.8,.2)*M(K,p,I,300.*N(y,d,.5,.5,.4,0.),0.);"
       "else"
         " if(a==6)"
           "g=O(K,0.,.2,.2)*N(K,p,I,800.*O(K,.0001,.0001,.4),.1)*5.;"
         "else"
           " if(a==12)"
             "g=N(4.*p*i,(.2+.5*N(.21*y))*N(.25*p*i));"
           "else"
             " if(a==13)"
               "g=O(y,d,.75,.5,.1,.8)*floor(8.*D(floor(128.*K+.5)/128.,p,0.,200,1,-1.,500.+4500.*O(y,d,.5,.5,.1,10.),20.,0.,0.,.018,0.,0)+.5)*.12;"
             "else"
               " if(a==18)"
                 "g=(200.+300.*P(4.*(fract(-16.*y)+.5)))*N(K,I,0.,.2,.2,.5)*O(K,p,I,200.+.3*p,.3);"
               "else"
                 " if(a==-1)"
                   "g=O(K,0.,1.);"
                 "else"
                   " if(a==-2)"
                     "g=O(K,0.,1.);"
                   "else"
                     " if(a==-3)"
                       "g=O(K,0.,1.);"
                     "else"
                       " if(a==-4)"
                         "g=.7*S*fract(sin(i*100.*.9)*50000.*.9)*N(K,.03,.15,.15);"
                       "else"
                         " if(a==-5)"
                           "g=S*M(i,y,1,2.,2.,1.5,2.,1.,1.);"
                         "else"
                           " if(a==-6)"
                             "g=.4*(.6+.25*c(4.*f,0.))*S*fract(sin(i*100.*.3)*50000.*2.)*N(K,0.,.05,0.);"
                           "else"
                             " if(a==-7)"
                               "g=S*clamp(1.6*T(K*(350.+5200.*smoothstep(-.01,0.,-K)+450.*smoothstep(-.02,-.01,-K)))*smoothstep(-.1,-.02,-K)+.7*fract(sin(i*90.)*45000.)*N(K,.05,.3,.3),-1.,1.)*N(K,0.,.25,.3);"
   "return clamp(x,0.,1.)*D(g);"
 "}"
 "float T(float i,int f)"
 "{"
   "i=mod(i,1.);"
   "float r=0.;"
   "for(int e=0;e<8;e++)"
     "if((f&1<<e)>0)"
       "r+=step(i,float(7-e)/8.);"
   "return r*.125;"
 "}"
 "float k(float f)"
 "{"
   "float y=22.;"
   "int P=19;"
   "float T=8.,K=0.,g=0.,S=mod(I*f,y);"
   "if(S>y)"
     "return K;"
   "f=b*S;"
   "float t=1.,h=0.,k=0.;"
   "for(int u=0;u<NTRK;u++)"
     "{"
       "int M=i(u+1)-i(u),o=M-1;"
       "for(int l=0;l<M-1;l++)"
         "if(S<n(i(u)+l))"
           "{"
             "o=l;"
             "break;"
           "}"
       "int l=M-1;"
       "for(int R=0;R<M-1;R++)"
         "if(S<d(i(u)+R)+w(u))"
           "{"
             "l=R;"
             "break;"
           "}"
       "for(int R=l;R<=o;R++)"
         "{"
           "float O=S-n(i(u)+R);"
           "int F=s(i(u)+R),q=m(F+1)-m(F),W=q-1;"
           "for(int C=0;C<q-1;C++)"
             "if(O<x(m(F)+C+1))"
               "{"
                 "W=C;"
                 "break;"
               "}"
           "int C=q-1;"
           "for(int V=0;V<q-1;V++)"
             "if(O<=a(m(F)+V)+w(u))"
               "{"
                 "C=V;"
                 "break;"
               "}"
           "for(int V=C;V<=W;V++)"
             "{"
               "h=x(m(F)+V);"
               "k=a(m(F)+V)+w(u);"
               "float B=1.-exp(-1000.*(O-h));"
               "if(p(u)==P)"
                 "{"
                   "int z=int(mod(c(m(F)+V),T));"
                   "float Z=e(m(F)+V)*pow(2.,N(i(u)+R)/6.);"
                   "if(z==0)"
                     "t=B-.999*v(O-h)*smoothstep(k,h,O);"
                   "else"
                     " g+=r(u)*D(f,O,h,k,Z,-z);"
                 "}"
               "else"
                 " K+=r(u)*D(f,O,h,k,c(m(F)+V)+12.+N(i(u)+R),p(u));"
             "}"
         "}"
     "}"
   "return D(D(t*K+g));"
 "}"
 "vec2 F(float i)"
 "{"
   "float f=.0002;"
   "return vec2(k(i),k(i-f));"
 "}"
 "void main()"
 "{"
   "float i=(iBlockOffset+(gl_FragCoord.x-.5)+(gl_FragCoord.y-.5)*float(iTexS))/iSampleRate;"
   "vec2 f=iVolume*F(i),a=floor((.5+.5*f)*65535.),y=mod(a,256.)/255.,d=mod(floor(a/256.),256.)/255.;"
   "gl_FragColor=vec4(y.x,d.x,y.y,d.y);"
 "}";

#endif // SFX_H_
