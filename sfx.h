/* File generated with Shader Minifier 1.1.5
 * http://www.ctrl-alt-test.fr
 */
#ifndef SFX_H_
# define SFX_H_

const char *sfx_frag =
 "#version 130\n"
 "#define PI radians(180.)\n"
 "float f(float i)"
 "{"
   "return clamp(i,-1.,1.);"
 "}"
 "float i(float f)"
 "{"
   "return smoothstep(0.,.01,f);"
 "}"
 "float r(float i)"
 "{"
   "return sin(2.*PI*mod(i,1.));"
 "}"
 "float f(float i,float f)"
 "{"
   "return sin(2.*PI*mod(i,1.)+f);"
 "}"
 "float t(float i)"
 "{"
   "return sign(2.*fract(i)-1.);"
 "}"
 "float i(float i,float f)"
 "{"
   "return sign(2.*fract(i)-1.+f);"
 "}"
 "float s(float i)"
 "{"
   "return f(50.*f(i));"
 "}"
 "float r(float i,float w)"
 "{"
   "return f(50.*(f(i)-w));"
 "}"
 "float d(float i)"
 "{"
   "return 4.*abs(fract(i)-.5)-1.;"
 "}"
 "float d(float i,float f,float N)"
 "{"
   "return floor(f*i+.5)*N;"
 "}"
 "float p(float f)"
 "{"
   "return 32.7*pow(2.,f/12.);"
 "}"
 "float N(int i)"
 "{"
   "return 1.-2.*float(i%2);"
 "}"
 "float n(int i)"
 "{"
   "return round(sin(.5*PI*float(i)));"
 "}"
 "float g(float i)"
 "{"
   "return fract(sin(dot(vec2(i),vec2(12.9898,78.233)))*43758.5);"
 "}\n"
 "#define pat4(a,b,c,d,x)mod(x,1.)<.25?a:mod(x,1.)<.5?b:mod(x,1.)<.75?c:d\n"
 "const float m=40.,x=m/60.,I=60./m,l=44100.,c=1./l,K=.001;"
 "float N(float i,float f,float K,float N,float w,float s,float a)"
 "{"
   "float r=i/K,c=1.-(1.-s)*(i-N-K)/w,x=i<=f-a?1.:(f-i)/a;"
   "return i<K?r:i<K+N?1:i<K+N+w?c:i<=f-a?s:i<=f?(f-i)/a:0.;"
 "}"
 "float a(float i)"
 "{"
   "return 2./PI*atan(i);"
 "}"
 "float N(float i,float f)"
 "{"
   "return abs(i)<f?i:floor(4.*i+.5)*.25;"
 "}"
 "float a(float f,float i,float w,float s,float K,float N,float a)"
 "{"
   "float r,I=sign(f);"
   "f=abs(f);"
   "if(f<w)"
     "r=s*smoothstep(0.,w,f);"
   "else"
     " if(f<K)"
       "r=K+(s-K)*smoothstep(K,w,f);"
     "else"
       " if(f<=N)"
         "r=f;"
       "else"
         " if(f<=1.)"
           "{"
             "float m=(f-N)/(1.-N);"
             "r=N+(a-N)*(1.5*m*(1.-.33*m*m));"
           "}"
         "else"
           " return 1.;"
   "return I*mix(f,r,i);"
 "}"
 "float N(float i,float w,float K,float N,float s,float r,float a,float I,float m)"
 "{"
   "return i=i-w,i<0.?0.:K+N*i+s*i*i+r*f(a*i)+I*exp(-m*i);"
 "}"
 "float a(int i,float f)"
 "{"
   "return f*N(i);"
 "}"
 "float d(int i,float N)"
 "{"
   "return i%2==0?0.:N*N*n(i);"
 "}"
 "float N(int i,float w,float N)"
 "{"
   "return i%2==0?0.:w*(1.-n(i))*f(N);"
 "}"
 "float a(int i,float w,float K)"
 "{"
   "return i%2==0?0.:w*(N(i)*f(K*float(i)+.25)-1.);"
 "}"
 "float g(float i,float w)"
 "{"
   "if(w>0.)"
     "return abs(w)*.8*f(i+.35*f(i));"
   "else"
     " return abs(w)*f(i+.5*PI);"
 "}"
 "float N(float i,float N,float w,float s,float m,float I,float r,float K,float x,float e,float v,float c,float b,float D,float T,float d)"
 "{"
   "int l=int(d);"
   "float t=K*N*i+w,P=x*N*i+w,M=e*N*i+w,q=v*N*i+w,O=0.,k=0.,y=0.,p=0.,n=0.,o=0.;"
   "if(l==1)"
     "y=1.,p=1.,o=1.;"
   "else"
     " if(l==2)"
       "k=1.,p=1.,o=1.;"
     "else"
       " if(l==3)"
         "O=1.,p=1.,o=1.;"
       "else"
         " if(l==4)"
           "k=1.,y=1.,n=1.,o=1.;"
         "else"
           " if(l==5)"
             "O=1.,n=1.,o=1.;"
           "else"
             " if(l==6)"
               "y=1.,p=1.;"
             "else"
               " if(l==7)"
                 "y=1.,p=1.,n=1.;"
               "else"
                 " if(l==8)"
                   "o=1.,y=1.;"
                 "else"
                   " if(l==9)"
                     "y=1.,k=1.,O=1.;"
                   "else"
                     " if(l==10)"
                       "y=1.,k=1.;"
                     "else"
                       " if(l==11)"
                         "y=1.;"
   "float h=r*f(q+g(q,T)),S=I*f(M+g(M,D)+y*h),R=m*f(P+g(P,b)+k*h+p*S),W=s*f(t+g(t,c)+O*h+n*S+p*R),u=W;"
   "if(o>0.)"
     "u+=R;"
   "if(n+p>0.)"
     "u+=S;"
   "if(O+k+y>0.)"
     "u+=h;"
   "return a(u);"
 "}"
 "float N(float f,float w,float N,float s,float l,float a,float x,float m)"
 "{"
   "int k=int(log(K)/log(s));"
   "float P[4]=float[4](l,a,x,m),e=0.;"
   "for(int y=0;y<8;y++)"
     "{"
       "float p=1.;"
       "for(int D=0;D<k;D++)"
         "{"
           "float o=f-float(D)*P[y]*(.8+.4*g(e));"
           "e+=p*(i(o*I)*exp(-8.*o*I)*((.5+.5*r(8.*o*I))*(2.*fract(w*o)-1.)));"
           "p*=-s;"
         "}"
     "}"
   "return.25*e;"
 "}"
 "float N(float i,float f,float w,float s,float r,float a,float x,float m,float I,float D)"
 "{"
   "float l=i,k=-I*N(l,f,w,s,r,a,x,m),o=1.-I*I;"
   "int y=1+int((log(K)-log(o))/log(I));"
   "for(int e=0;e<y;e++)"
     "l-=D*(.9+.2*g(i)),k+=o*N(l,f,w,s,r,a,x,m),o*=I*(1.+.01*g(l));"
   "return k;"
 "}"
 "float N(float i,float f,float w,float s,float r,float a,float x,float m,float I,float D,float o)"
 "{"
   "float l=i,k=-I*N(l,f,w,s,r,a,x,m,I,D),p=1.-I*I;"
   "int y=1+int((log(K)-log(p))/log(I));"
   "for(int e=0;e<y;e++)"
     "l-=o*(.9+.2*g(i)),k+=p*N(l,f,w,s,r,a,x,m,I,D),p*=I*(1.+.01*g(l));"
   "return k;"
 "}"
 "float a(float w,float s,float K,float l,float m,int r,float x,float D)"
 "{"
   "float o=s-K,k=o/(l-K),y=l-K,n=I*y,O=I*(s-K),e=p(m),c=i(s-K)*(1.-smoothstep(l,l+D,s)),u=f(w*e);"
   "if(r==0)"
     ";"
   "else"
     " if(r==3)"
       "u=f(e*w)+-.1*N(w,0.,1.,2.,-.5,3.,2.,2.,-.25)*f(e*w)+.1*N(w,0.,1.,2.,-.5,3.,2.,2.,-.25)*a(f(e*w),1.,.01,.7,.1,.6,.8);"
   "return clamp(c,0.,1.)*a(u);"
 "}"
 "uniform float iBlockOffset,iSampleRate,iVolume;"
 "uniform int iTexS;"
 "uniform sampler2D iSequence;"
 "uniform float iSequenceWidth;"
 "float v(float i)"
 "{"
   "float f=mod(i,2.);"
   "i*=.5;"
   "vec2 w=(vec2(mod(i,iSequenceWidth),floor(i/iSequenceWidth))+.05)/iSequenceWidth;"
   "vec4 l=texture(iSequence,w);"
   "vec2 r=mix(l.xy,l.zw,f);"
   "return round(dot(vec2(255.,65280.),r));"
 "}"
 "float w(int i)"
 "{"
   "float f=v(float(i)),I=floor(f/32768.),l=floor(f/1024.-I*32.),N=f-I*32768.-l*1024.;"
   "if(l==0.)"
     "return mix(1.,-1.,I)*5.96046e-08*N;"
   "return mix(1.,-1.,I)*(1.+N*.000976563)*pow(2.,l-15.);"
 "}\n"
 "#define NTRK 1\n"
 "#define NMOD 1\n"
 "#define NPTN 1\n"
 "#define NNOT 26\n"
 "int e(int i)"
 "{"
   "return int(w(i));"
 "}"
 "int P(int i)"
 "{"
   "return int(w(i+1+1*NTRK));"
 "}"
 "float o(int i)"
 "{"
   "return w(i+1+2*NTRK);"
 "}"
 "float b(int i)"
 "{"
   "return w(i+1+3*NTRK);"
 "}"
 "float u(int i)"
 "{"
   "return w(i+1+4*NTRK);"
 "}"
 "float T(int i)"
 "{"
   "return w(i+1+4*NTRK+1*NMOD);"
 "}"
 "int R(int i)"
 "{"
   "return int(w(i+1+4*NTRK+2*NMOD));"
 "}"
 "float O(int i)"
 "{"
   "return w(i+1+4*NTRK+3*NMOD);"
 "}"
 "int S(int i)"
 "{"
   "return int(w(i+1+4*NTRK+4*NMOD));"
 "}"
 "float D(int i)"
 "{"
   "return w(i+2+4*NTRK+4*NMOD+NPTN);"
 "}"
 "float h(int i)"
 "{"
   "return w(i+2+4*NTRK+4*NMOD+NPTN+1*NNOT);"
 "}"
 "float M(int i)"
 "{"
   "return w(i+2+4*NTRK+4*NMOD+NPTN+2*NNOT);"
 "}"
 "float q(int i)"
 "{"
   "return w(i+2+4*NTRK+4*NMOD+NPTN+3*NNOT);"
 "}"
 "float k(float i)"
 "{"
   "float f=4.;"
   "int w=15;"
   "float l=2.,N=0.,K=0.,k=mod(x*i,f);"
   "if(k>f)"
     "return N;"
   "i=I*k;"
   "float r=1.,s=0.,y=0.;"
   "for(int m=0;m<NTRK;m++)"
     "{"
       "int p=e(m),n=e(m+1)-p,c=n-1;"
       "for(int v=0;v<n-1;v++)"
         "if(k<u(p+v))"
           "{"
             "c=v;"
             "break;"
           "}"
       "int v=n-1;"
       "for(int t=0;t<n-1;t++)"
         "if(k<T(p+t)+b(m))"
           "{"
             "v=t;"
             "break;"
           "}"
       "for(int t=v;t<=c;t++)"
         "{"
           "float d=k-u(p+t);"
           "int W=R(p+t),g=S(W),F=S(W+1)-g,C=F-1;"
           "for(int B=0;B<F-1;B++)"
             "if(d<D(g+B+1)+b(m))"
               "{"
                 "C=B;"
                 "break;"
               "}"
           "int B=F-1;"
           "for(int z=0;z<F-1;z++)"
             "if(d<=h(g+z)+b(m))"
               "{"
                 "B=z;"
                 "break;"
               "}"
           "for(int z=B;z<=C;z++)"
             "{"
               "s=D(g+z);"
               "y=h(g+z);"
               "if(P(m)==w)"
                 "{"
                   "int V=int(mod(M(g+z),l));"
                   "if(V==0)"
                     "r=1.-smoothstep(s,s+.0001,d)+smoothstep(s,y,d);"
                   "else"
                     " K+=o(m)*a(i,d,s,y,O(p+t),-V,q(g+z),b(m));"
                 "}"
               "else"
                 " N+=o(m)*a(i,d,s,y,M(g+z)+O(p+t),P(m),q(g+z),b(m));"
             "}"
         "}"
     "}"
   "return a(a(r*N+K));"
 "}"
 "vec2 W(float i)"
 "{"
   "float f=.0002;"
   "return vec2(k(i),k(i-f));"
 "}"
 "void main()"
 "{"
   "float i=(iBlockOffset+gl_FragCoord.x+gl_FragCoord.y*iTexSize)/iSampleRate;"
   "vec2 N=W(i),f=floor((.5+.5*N)*65535.),l=mod(f,256.)/255.,y=floor(f/256.)/255.;"
   "gl_FragColor=vec4(l.x,y.x,l.y,y.y);"
 "}";

#endif // SFX_H_
