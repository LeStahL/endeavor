/* File generated with Shader Minifier 1.1.5
 * http://www.ctrl-alt-test.fr
 */
#ifndef SFX_H_
# define SFX_H_

const char *sfx_frag =
 "#version 130\n"
 "#define PI radians(180.)\n"
 "float f(float i)"
 "{"
   "return clamp(i,-1.,1.);"
 "}"
 "float i(float f)"
 "{"
   "return smoothstep(0.,.01,f);"
 "}"
 "float t(float i)"
 "{"
   "return sin(2.*PI*mod(i,1.));"
 "}"
 "float f(float i,float v)"
 "{"
   "return sin(2.*PI*mod(i,1.)+v);"
 "}"
 "float r(float i)"
 "{"
   "return sign(2.*fract(i)-1.);"
 "}"
 "float i(float i,float v)"
 "{"
   "return sign(2.*fract(i)-1.+v);"
 "}"
 "float N(float i)"
 "{"
   "return f(50.*t(i));"
 "}"
 "float N(float i,float v)"
 "{"
   "return f(50.*(t(i)-v));"
 "}"
 "float s(float i)"
 "{"
   "return 4.*abs(fract(i)-.5)-1.;"
 "}"
 "float d(float f)"
 "{"
   "return 32.7*pow(2.,f/12.);"
 "}"
 "float p(int i)"
 "{"
   "return 1.-2.*float(i%2);"
 "}"
 "float n(int i)"
 "{"
   "return round(sin(.5*PI*float(i)));"
 "}"
 "float P(float i)"
 "{"
   "return fract(sin(dot(vec2(i),vec2(12.9898,78.233)))*43758.5);"
 "}\n"
 "#define pat4(a,b,c,d,x)mod(x,1.)<.25?a:mod(x,1.)<.5?b:mod(x,1.)<.75?c:d\n"
 "const float m=25.,I=m/60.,e=60./m,x=44100.,c=1./x,K=.001;"
 "float N(float i,float f,float v,float N,float s,float x,float e)"
 "{"
   "float r=i/v,c=1.-(1.-x)*(i-N-v)/s,b=i<=f-e?1.:(f-i)/e;"
   "return i<v?r:i<v+N?1:i<v+N+s?c:i<=f-e?x:i<=f?(f-i)/e:0.;"
 "}"
 "float g(float i)"
 "{"
   "return 2./PI*atan(i);"
 "}"
 "float P(float i,float v)"
 "{"
   "return abs(i)<v?i:floor(4.*i+.5)*.25;"
 "}"
 "float P(float f,float i,float v,float s,float K,float N,float r)"
 "{"
   "float e,I=sign(f);"
   "f=abs(f);"
   "if(f<v)"
     "e=s*smoothstep(0.,v,f);"
   "else"
     " if(f<K)"
       "e=K+(s-K)*smoothstep(K,v,f);"
     "else"
       " if(f<=N)"
         "e=f;"
       "else"
         " if(f<=1.)"
           "{"
             "float t=(f-N)/(1.-N);"
             "e=N+(r-N)*(1.5*t*(1.-.33*t*t));"
           "}"
         "else"
           " return 1.;"
   "return I*mix(f,e,i);"
 "}"
 "float d(int i,float v)"
 "{"
   "return v*p(i);"
 "}"
 "float g(int i,float N)"
 "{"
   "return i%2==0?0.:N*N*n(i);"
 "}"
 "float N(int i,float v,float f)"
 "{"
   "return i%2==0?0.:v*(1.-n(i))*t(f);"
 "}"
 "float P(int i,float v,float f)"
 "{"
   "return i%2==0?0.:v*(p(i)*t(f*float(i)+.25)-1.);"
 "}"
 "float n(float i,float f)"
 "{"
   "if(f>0.)"
     "return abs(f)*.8*t(i+.35*t(i));"
   "else"
     " return abs(f)*t(i+.5*PI);"
 "}"
 "float N(float i,float N,float v,float f,float s,float e,float m,float I,float r,float x,float a,float K,float c,float b,float D,float l)"
 "{"
   "int d=int(l);"
   "float p=I*N*i+v,M=r*N*i+v,q=x*N*i+v,k=a*N*i+v,O=0.,y=0.,P=0.,w=0.,o=0.,u=0.;"
   "if(d==1)"
     "P=1.,w=1.,u=1.;"
   "else"
     " if(d==2)"
       "y=1.,w=1.,u=1.;"
     "else"
       " if(d==3)"
         "O=1.,w=1.,u=1.;"
       "else"
         " if(d==4)"
           "y=1.,P=1.,o=1.,u=1.;"
         "else"
           " if(d==5)"
             "O=1.,o=1.,u=1.;"
           "else"
             " if(d==6)"
               "P=1.,w=1.;"
             "else"
               " if(d==7)"
                 "P=1.,w=1.,o=1.;"
               "else"
                 " if(d==8)"
                   "u=1.,P=1.;"
                 "else"
                   " if(d==9)"
                     "P=1.,y=1.,O=1.;"
                   "else"
                     " if(d==10)"
                       "P=1.,y=1.;"
                     "else"
                       " if(d==11)"
                         "P=1.;"
   "float h=m*t(k+n(k,D)),T=e*t(q+n(q,b)+P*h),S=s*t(M+n(M,c)+y*h+w*T),R=f*t(p+n(p,K)+O*h+o*T+w*S),W=R;"
   "if(u>0.)"
     "W+=S;"
   "if(o+w>0.)"
     "W+=T;"
   "if(O+y+P>0.)"
     "W+=h;"
   "return g(W);"
 "}"
 "float N(float v,float f,float s,float d,float x,float r,float c,float b)"
 "{"
   "int u=int(log(K)/log(d));"
   "float t[4]=float[4](x,r,c,b),w=0.;"
   "for(int m=0;m<8;m++)"
     "{"
       "float I=1.;"
       "for(int D=0;D<u;D++)"
         "{"
           "float p=v-float(D)*t[m]*(.8+.4*P(w));"
           "w+=I*(i(p*e)*exp(-8.*p*e)*((.5+.5*N(8.*p*e))*(2.*fract(f*p)-1.)));"
           "I*=-d;"
         "}"
     "}"
   "return.25*w;"
 "}"
 "float N(float i,float f,float v,float s,float x,float r,float c,float e,float t,float I)"
 "{"
   "float d=i,w=-t*N(d,f,v,s,x,r,c,e),u=1.-t*t;"
   "int m=1+int((log(K)-log(u))/log(t));"
   "for(int D=0;D<m;D++)"
     "d-=I*(.9+.2*P(i)),w+=u*N(d,f,v,s,x,r,c,e),u*=t*(1.+.01*P(d));"
   "return w;"
 "}"
 "float N(float i,float f,float v,float s,float x,float r,float c,float e,float t,float b,float I)"
 "{"
   "float d=i,w=-t*N(d,f,v,s,x,r,c,e,t,b),u=1.-t*t;"
   "int m=1+int((log(K)-log(u))/log(t));"
   "for(int D=0;D<m;D++)"
     "d-=I*(.9+.2*P(i)),w+=u*N(d,f,v,s,x,r,c,e,t,b),u*=t*(1.+.01*P(d));"
   "return w;"
 "}"
 "float N(float i,float f,float v,float d,float s,float e)"
 "{"
   "float N=0.,t=2.*PI/e,P=2.*PI*c*(d-s),u=2.*PI*c*(d+s);"
   "if(P<0.)"
     "P=0.;"
   "if(u>PI)"
     "u=PI;"
   "float x,w,I,p;"
   "e--;"
   "for(float r=1.;r<=e;r++)"
     "w=r-.5*e,I=.42-.5*cos(w*t)-.08*cos(2.*w*t),p=1./(PI*w)*(sin(w*u)-sin(w*P)),x=i-r*c,N+=I*p*(2.*fract(f*x)-1.);"
   "return g(e*e*N);"
 "}"
 "float P(float v,float s,float x,float r,float K,int c,float m,float b)"
 "{"
   "float P=s-x,u=P/(r-x),w=r-x,I=e*w,p=e*(s-x),y=d(K),o=i(s-x)*(1.-smoothstep(r,r+b,s)),D=t(v*y);"
   "if(c==0)"
     ";"
   "else"
     " if(c==1)"
       "D=N(p,I,.01,1.,1.,0.,0.)*f(y*v,(.5+.5*(2.*fract(2.*s)-1.))*f(.999*y*v,.35*t(y*v)))+N(p,I,.01,1.,1.,0.,0.)*.4*t(.5*y*v)+N(p,I,.01,1.,1.,0.,0.)*.4*t(.501*y*v);"
     "else"
       " if(c==2)"
         "D=i(P)*exp(-16.*mod(P,.125))*i(P)*exp(-1.5*P)*(g(2.*fract(y*v)-1.+(2.*fract(.99*y*v)-1.)+(2.*fract(.967*y*v)-1.)+(2.*fract(.96*y*v)-1.))+.6*g(2.*fract(.5*y*v+.01)-1.+(2.*fract(.475*y*v+.01)-1.)+(2.*fract(.515*y*v+.01)-1.)+(2.*fract(.51*y*v+.01)-1.)));"
       "else"
         " if(c==8)"
           "D=N(p,y,I,2000.+1500.*t(.25*s),10.,100.);"
   "return clamp(o,0.,1.)*g(D);"
 "}"
 "uniform float iBlockOffset,iSampleRate,iVolume;"
 "uniform int iTexSize;"
 "uniform sampler2D iSequence;"
 "uniform float iSequenceWidth;"
 "float a(float i)"
 "{"
   "float f=mod(i,2.);"
   "i*=.5;"
   "vec2 v=(vec2(mod(i,iSequenceWidth),floor(i/iSequenceWidth))+.05)/iSequenceWidth;"
   "vec4 d=texture(iSequence,v);"
   "vec2 u=mix(d.xy,d.zw,f);"
   "return round(dot(vec2(255.,65280.),u));"
 "}"
 "float v(int i)"
 "{"
   "float f=a(float(i)),u=floor(f/32768.),d=floor(f/1024.-u*32.),N=f-u*32768.-d*1024.;"
   "if(d==0.)"
     "return mix(1.,-1.,u)*5.96046e-08*N;"
   "return mix(1.,-1.,u)*(1.+N*.000976563)*pow(2.,d-15.);"
 "}\n"
 "#define NTRK 4\n"
 "#define NMOD 24\n"
 "#define NPTN 5\n"
 "#define NNOT 166\n"
 "int w(int i)"
 "{"
   "return int(v(i));"
 "}"
 "int l(int i)"
 "{"
   "return int(v(i+1+1*NTRK));"
 "}"
 "float o(int i)"
 "{"
   "return v(i+1+2*NTRK);"
 "}"
 "float b(int i)"
 "{"
   "return v(i+1+3*NTRK);"
 "}"
 "float u(int i)"
 "{"
   "return v(i+1+4*NTRK);"
 "}"
 "float T(int i)"
 "{"
   "return v(i+1+4*NTRK+1*NMOD);"
 "}"
 "int R(int i)"
 "{"
   "return int(v(i+1+4*NTRK+2*NMOD));"
 "}"
 "float O(int i)"
 "{"
   "return v(i+1+4*NTRK+3*NMOD);"
 "}"
 "int S(int i)"
 "{"
   "return int(v(i+1+4*NTRK+4*NMOD));"
 "}"
 "float D(int i)"
 "{"
   "return v(i+2+4*NTRK+4*NMOD+NPTN);"
 "}"
 "float h(int i)"
 "{"
   "return v(i+2+4*NTRK+4*NMOD+NPTN+1*NNOT);"
 "}"
 "float M(int i)"
 "{"
   "return v(i+2+4*NTRK+4*NMOD+NPTN+2*NNOT);"
 "}"
 "float q(int i)"
 "{"
   "return v(i+2+4*NTRK+4*NMOD+NPTN+3*NNOT);"
 "}"
 "float k(float i)"
 "{"
   "float f=24.1;"
   "int v=18;"
   "float d=1.,N=0.,s=0.,t=mod(I*i,f);"
   "if(t>f)"
     "return N;"
   "i=e*t;"
   "float y=1.,r=0.,x=0.;"
   "for(int K=0;K<NTRK;K++)"
     "{"
       "int c=w(K),m=w(K+1)-c,p=m-1;"
       "for(int a=0;a<m-1;a++)"
         "if(t<u(c+a))"
           "{"
             "p=a;"
             "break;"
           "}"
       "int a=m-1;"
       "for(int k=0;k<m-1;k++)"
         "if(t<T(c+k)+b(K))"
           "{"
             "a=k;"
             "break;"
           "}"
       "for(int k=a;k<=p;k++)"
         "{"
           "float W=t-u(c+k);"
           "int n=R(c+k),F=S(n),C=S(n+1)-F,z=C-1;"
           "for(int B=0;B<C-1;B++)"
             "if(W<D(F+B+1)+b(K))"
               "{"
                 "z=B;"
                 "break;"
               "}"
           "int B=C-1;"
           "for(int V=0;V<C-1;V++)"
             "if(W<=h(F+V)+b(K))"
               "{"
                 "B=V;"
                 "break;"
               "}"
           "for(int V=B;V<=z;V++)"
             "{"
               "r=D(F+V);"
               "x=h(F+V);"
               "if(l(K)==v)"
                 "{"
                   "int Z=int(mod(M(F+V),d));"
                   "if(Z==0)"
                     "y=1.-smoothstep(r,r+.0001,W)+smoothstep(r,x,W);"
                   "else"
                     " s+=o(K)*P(i,W,r,x,O(c+k),-Z,q(F+V),b(K));"
                 "}"
               "else"
                 " N+=o(K)*P(i,W,r,x,M(F+V)+O(c+k),l(K),q(F+V),b(K));"
             "}"
         "}"
     "}"
   "return g(g(y*N+s));"
 "}"
 "vec2 W(float i)"
 "{"
   "float v=.0002;"
   "return vec2(k(i),k(i-v));"
 "}"
 "void main()"
 "{"
   "float i=(iBlockOffset+gl_FragCoord.x+gl_FragCoord.y*iTexSize)/iSampleRate;"
   "vec2 v=W(i),f=floor((.5+.5*v)*65535.),d=mod(f,256.)/255.,u=floor(f/256.)/255.;"
   "gl_FragColor=vec4(d.x,u.x,d.y,u.y);"
 "}";

#endif // SFX_H_
